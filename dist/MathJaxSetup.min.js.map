{"version":3,"sources":["MathJaxSetup.js"],"names":["Preview","delay","buffer","timeout","oldText","this","preview","document","getElementById","SwapBuffers","style","visibility","position","Update","clearTimeout","setTimeout","callback","CreatePreview","mjRunning","text","$","html","oldtext","innerHTML","MathJax","Hub","Queue","PreviewDone","Callback","autoReset"],"mappings":"aAAA,IAAIA,QAAU,CACZC,MAAO,IAAPA,QAAO,KAAYC,OAAA,KAEAC,QAAA,KACnBD,WAAQ,EAAWE,QAAA,KAInBA,KAAAA,WAAmBC,KAAAC,QAAAC,SAAAC,eAAA,eAEnBH,KAAAH,OAAAK,SAAAC,eAAA,eASAC,YAAA,WACA,IAAAP,EAAAG,KAAAC,QAAAA,EAAAD,KAAAH,OACAG,KAAAH,OAAAA,EAAAG,KAAAC,QAAAA,EACAJ,EAAAQ,MAAAC,WAAA,SAAAT,EAAAQ,MAAAE,SAAA,WACAH,EAAAA,MAAaG,SAAA,GAAAN,EAAYI,MAAAC,WAAA,IAQzBE,OAAA,WACAR,KAAAF,SAAAW,aAAAT,KAAAF,SACAE,KAAAF,QAAAY,WAAAV,KAAAW,SAAAX,KAAAJ,QAOIgB,cAAA,WAGJ,GA3CYjB,QAAAG,QAAA,MA2CZE,KAAAa,UAAA,CACA,IAAAC,EAAAC,EAAA,yBAAAC,OACAF,IAAAd,KAAAiB,UACAjB,KAAAH,OAAAqB,UAAAlB,KAAAiB,QAAAH,EACAd,KAAAa,WAAA,EACAM,QAAAC,IAAAC,MACA,CAAA,UAAAF,QAAAC,IAAApB,KAAAH,QACAe,CAAAA,cAAeZ,UAWdsB,YA7DW,WA+DZtB,KAAAa,WAAA,EACAb,KAAAI,gBAWFT,QAAAgB,SAAAQ,QAAAI,SAAA,CAAA,gBAAA5B,UACAA,QAAAgB,SAAAa,WAAA","file":"MathJaxSetup.min.js","sourcesContent":["var Preview = {\r\n  delay: 150,        // delay after keystroke before updating\r\n\r\n  preview: null,     // filled in by Init below\r\n  buffer: null,      // filled in by Init below\r\n\r\n  timeout: null,     // store setTimout id\r\n  mjRunning: false,  // true when MathJax is processing\r\n  oldText: null,     // used to check if an update is needed\r\n\r\n  //\r\n  //  Get the preview and buffer DIV's\r\n  //\r\n  Init: function () {\r\n    this.preview = document.getElementById(\"MathPreview\");\r\n    this.buffer = document.getElementById(\"MathBuffer\");\r\n  },\r\n\r\n  //\r\n  //  Switch the buffer and preview, and display the right one.\r\n  //  (We use visibility:hidden rather than display:none since\r\n  //  the results of running MathJax are more accurate that way.)\r\n  //\r\n  SwapBuffers: function () {\r\n    var buffer = this.preview, preview = this.buffer;\r\n    this.buffer = buffer; this.preview = preview;\r\n    buffer.style.visibility = \"hidden\"; buffer.style.position = \"absolute\";\r\n    preview.style.position = \"\"; preview.style.visibility = \"\";\r\n  },\r\n\r\n  //\r\n  //  This gets called when a key is pressed in the textarea.\r\n  //  We check if there is already a pending update and clear it if so.\r\n  //  Then set up an update to occur after a small delay (so if more keys\r\n  //    are pressed, the update won't occur until after there has been \r\n  //    a pause in the typing).\r\n  //  The callback function is set up below, after the Preview object is set up.\r\n  //\r\n  Update: function () {\r\n    if (this.timeout) {clearTimeout(this.timeout)}\r\n      this.timeout = setTimeout(this.callback,this.delay);\r\n  },\r\n\r\n  //\r\n  //  Creates the preview and runs MathJax on it.\r\n  //  If MathJax is already trying to render the code, return\r\n  //  If the text hasn't changed, return\r\n  //  Otherwise, indicate that MathJax is running, and start the\r\n  //    typesetting.  After it is done, call PreviewDone.\r\n  //  \r\n  CreatePreview: function () {\r\n    Preview.timeout = null;\r\n    if (this.mjRunning) return;\r\n    var text = $(\"#explanation-equation\").html();\r\n    if (text === this.oldtext) return;\r\n    this.buffer.innerHTML = this.oldtext = text;\r\n    this.mjRunning = true;\r\n    MathJax.Hub.Queue(\r\n      [\"Typeset\",MathJax.Hub,this.buffer],\r\n      [\"PreviewDone\",this]\r\n      );\r\n  },\r\n\r\n  //\r\n  //  Indicate that MathJax is no longer running,\r\n  //  and swap the buffers to show the results.\r\n  //\r\n  PreviewDone: function () {\r\n    this.mjRunning = false;\r\n    this.SwapBuffers();\r\n  }\r\n\r\n};\r\n\r\n//\r\n//  Cache a callback to the CreatePreview action\r\n//\r\nPreview.callback = MathJax.Callback([\"CreatePreview\",Preview]);\r\nPreview.callback.autoReset = true;  // make sure it can run more than once\r\n"]}