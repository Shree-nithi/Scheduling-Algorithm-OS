{"version":3,"sources":["MathJaxSetup.js"],"names":["Preview","delay","preview","buffer","timeout","mjRunning","oldText","Init","document","getElementById","SwapBuffers","style","visibility","position","Update","clearTimeout","setTimeout","callback","CreatePreview","text","$","html","oldtext","innerHTML","MathJax","Hub","Queue","PreviewDone","Callback","autoReset"],"mappings":";;AAAA,IAAIA,OAAO,GAAG;AACZC,EAAAA,KAAK,EAAE,GADK;AACO;AAEnBC,EAAAA,OAAO,EAAE,IAHG;AAGO;AACnBC,EAAAA,MAAM,EAAE,IAJI;AAIO;AAEnBC,EAAAA,OAAO,EAAE,IANG;AAMO;AACnBC,EAAAA,SAAS,EAAE,KAPC;AAOO;AACnBC,EAAAA,OAAO,EAAE,IARG;AAQO;AAEnB;AACA;AACA;AACAC,EAAAA,IAAI,EAAE,gBAAY;AAChB,SAAKL,OAAL,GAAeM,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAf;AACA,SAAKN,MAAL,GAAcK,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAd;AACD,GAhBW;AAkBZ;AACA;AACA;AACA;AACA;AACAC,EAAAA,WAAW,EAAE,uBAAY;AACvB,QAAIP,MAAM,GAAG,KAAKD,OAAlB;AAAA,QAA2BA,OAAO,GAAG,KAAKC,MAA1C;AACA,SAAKA,MAAL,GAAcA,MAAd;AAAsB,SAAKD,OAAL,GAAeA,OAAf;AACtBC,IAAAA,MAAM,CAACQ,KAAP,CAAaC,UAAb,GAA0B,QAA1B;AAAoCT,IAAAA,MAAM,CAACQ,KAAP,CAAaE,QAAb,GAAwB,UAAxB;AACpCX,IAAAA,OAAO,CAACS,KAAR,CAAcE,QAAd,GAAyB,EAAzB;AAA6BX,IAAAA,OAAO,CAACS,KAAR,CAAcC,UAAd,GAA2B,EAA3B;AAC9B,GA5BW;AA8BZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAE,EAAAA,MAAM,EAAE,kBAAY;AAClB,QAAI,KAAKV,OAAT,EAAkB;AAACW,MAAAA,YAAY,CAAC,KAAKX,OAAN,CAAZ;AAA2B;;AAC5C,SAAKA,OAAL,GAAeY,UAAU,CAAC,KAAKC,QAAN,EAAe,KAAKhB,KAApB,CAAzB;AACH,GAzCW;AA2CZ;AACA;AACA;AACA;AACA;AACA;AACA;AACAiB,EAAAA,aAAa,EAAE,yBAAY;AACzBlB,IAAAA,OAAO,CAACI,OAAR,GAAkB,IAAlB;AACA,QAAI,KAAKC,SAAT,EAAoB;AACpB,QAAIc,IAAI,GAAGC,CAAC,CAAC,uBAAD,CAAD,CAA2BC,IAA3B,EAAX;AACA,QAAIF,IAAI,KAAK,KAAKG,OAAlB,EAA2B;AAC3B,SAAKnB,MAAL,CAAYoB,SAAZ,GAAwB,KAAKD,OAAL,GAAeH,IAAvC;AACA,SAAKd,SAAL,GAAiB,IAAjB;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ,CACE,CAAC,SAAD,EAAWF,OAAO,CAACC,GAAnB,EAAuB,KAAKtB,MAA5B,CADF,EAEE,CAAC,aAAD,EAAe,IAAf,CAFF;AAID,GA7DW;AA+DZ;AACA;AACA;AACA;AACAwB,EAAAA,WAAW,EAAE,uBAAY;AACvB,SAAKtB,SAAL,GAAiB,KAAjB;AACA,SAAKK,WAAL;AACD;AAtEW,CAAd,C,CA0EA;AACA;AACA;;AACAV,OAAO,CAACiB,QAAR,GAAmBO,OAAO,CAACI,QAAR,CAAiB,CAAC,eAAD,EAAiB5B,OAAjB,CAAjB,CAAnB;AACAA,OAAO,CAACiB,QAAR,CAAiBY,SAAjB,GAA6B,IAA7B,C,CAAoC","sourcesContent":["var Preview = {\r\n  delay: 150,        // delay after keystroke before updating\r\n\r\n  preview: null,     // filled in by Init below\r\n  buffer: null,      // filled in by Init below\r\n\r\n  timeout: null,     // store setTimout id\r\n  mjRunning: false,  // true when MathJax is processing\r\n  oldText: null,     // used to check if an update is needed\r\n\r\n  //\r\n  //  Get the preview and buffer DIV's\r\n  //\r\n  Init: function () {\r\n    this.preview = document.getElementById(\"MathPreview\");\r\n    this.buffer = document.getElementById(\"MathBuffer\");\r\n  },\r\n\r\n  //\r\n  //  Switch the buffer and preview, and display the right one.\r\n  //  (We use visibility:hidden rather than display:none since\r\n  //  the results of running MathJax are more accurate that way.)\r\n  //\r\n  SwapBuffers: function () {\r\n    var buffer = this.preview, preview = this.buffer;\r\n    this.buffer = buffer; this.preview = preview;\r\n    buffer.style.visibility = \"hidden\"; buffer.style.position = \"absolute\";\r\n    preview.style.position = \"\"; preview.style.visibility = \"\";\r\n  },\r\n\r\n  //\r\n  //  This gets called when a key is pressed in the textarea.\r\n  //  We check if there is already a pending update and clear it if so.\r\n  //  Then set up an update to occur after a small delay (so if more keys\r\n  //    are pressed, the update won't occur until after there has been \r\n  //    a pause in the typing).\r\n  //  The callback function is set up below, after the Preview object is set up.\r\n  //\r\n  Update: function () {\r\n    if (this.timeout) {clearTimeout(this.timeout)}\r\n      this.timeout = setTimeout(this.callback,this.delay);\r\n  },\r\n\r\n  //\r\n  //  Creates the preview and runs MathJax on it.\r\n  //  If MathJax is already trying to render the code, return\r\n  //  If the text hasn't changed, return\r\n  //  Otherwise, indicate that MathJax is running, and start the\r\n  //    typesetting.  After it is done, call PreviewDone.\r\n  //  \r\n  CreatePreview: function () {\r\n    Preview.timeout = null;\r\n    if (this.mjRunning) return;\r\n    var text = $(\"#explanation-equation\").html();\r\n    if (text === this.oldtext) return;\r\n    this.buffer.innerHTML = this.oldtext = text;\r\n    this.mjRunning = true;\r\n    MathJax.Hub.Queue(\r\n      [\"Typeset\",MathJax.Hub,this.buffer],\r\n      [\"PreviewDone\",this]\r\n      );\r\n  },\r\n\r\n  //\r\n  //  Indicate that MathJax is no longer running,\r\n  //  and swap the buffers to show the results.\r\n  //\r\n  PreviewDone: function () {\r\n    this.mjRunning = false;\r\n    this.SwapBuffers();\r\n  }\r\n\r\n};\r\n\r\n//\r\n//  Cache a callback to the CreatePreview action\r\n//\r\nPreview.callback = MathJax.Callback([\"CreatePreview\",Preview]);\r\nPreview.callback.autoReset = true;  // make sure it can run more than once\r\n"],"file":"MathJaxSetup.dev.js"}